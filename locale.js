const translations = {
    en: {
        "nav.work": "Work",
        "nav.ventures": "Ventures",
        "nav.about": "About",
        "nav.dev": "Dev",
        "nav.writing": "Logbook",
        "nav.back_writing": "â† Logbook",
        "writing.archives": "Archives (Substack)",
        "work.intro": "A selection of projects where I've led product design and engineering. Visit <a href='https://stage2.xyz/'>stage2.xyz</a> to read more.",
        "home.headline": "Building for African Markets. Designing for Scale.",
        "home.role": "Solutions Architect & Tinkerer",
        "home.location": "Accra, Ghana ğŸ‡¬ğŸ‡­",
        "home.label_role": "Role",
        "home.label_base": "Base",
        "home.mission": "I am a Product Builder & Systems Thinker based in Accra. I architect digital solutions that solve local problems today while preparing for cross-border expansion tomorrow.",
        "home.say_hi": "My Story",
        "puzzle.title": "Quick Check",
        "puzzle.desc": "Solve to say hi:",
        "video.caption": "Thanks for checking in! ğŸ‰",
        "btn.cancel": "Cancel",
        "btn.verify": "Verify",

        "section.selected_works": "Selected Works",
        "home.show_more": "Show More",
        "section.initiatives": "Initiatives",
        "section.writing": "The Logbook",
        "section.ventures": "Ventures",
        "home.current_focus": "Currently: Building GatePass & researching logistics APIs in West Africa.",
        "footer.email": "Email",
        "footer.twitter": "Twitter",
        "footer.linkedin": "LinkedIn",
        "footer.github": "GitHub",
        "ventures.intro": "A collection of commercial ventures and experiments in Ghana ğŸ‡¬ğŸ‡­.",
        "about.intro": "Strategic Product Builder & Systems Thinker.",
        "about.headline": "Builder, thinker, and optimist.",
        "about.manifesto_intro": "I build digital products and businesses to solve real, persistent problems across Africa. Based in Accra, Ghana, my work focuses on designing platforms that are grounded in local realities while being capable of scaling across borders. Iâ€™m deeply interested in how African markets work, from user behaviour and infrastructure constraints to cross-border expansion and sustainable platform growth.",
        "about.pillars_heading": "Strategic Pillars",
        "about.pillar_1_title": "Local Relevance",
        "about.pillar_1_desc": "I don't believe in copy-pasting Silicon Valley models. I build for the specific infrastructure and behavioral constraints of the Ghanaian and African context.",
        "about.pillar_2_title": "Cross-Border DNA",
        "about.pillar_2_desc": "A product shouldn't be landlocked. I design systems (code and strategy) that are ready to travel to Abidjan, Lagos, and Nairobi from Day 1.",
        "about.pillar_3_title": "Sustainable Systems",
        "about.pillar_3_desc": "I focus on the intersection of clean code and viable business models. If it doesn't solve a problem sustainably, itâ€™s just a hobby.",
        "writing.intro": "A running catalog of my work in product, adventures in travel, and lessons in life.",
        "writing.articles": "The Logbook",
        "proj.rentbase": "The 'Carfax for Rentals' in Africaâ€”verifying agents and agreements to stop fraud before you pay.",
        "proj.amigo": "Verified roommate finder.",
        "proj.gatepass": "First video-powered marketplace for events.",
        "proj.happening": "A real-time \"Departure Board\" for live events.",
        "proj.itinero": "AI-powered travel planner for Africa.",
        "proj.knitted": "Business OS for tailors to record measurements.",
        "proj.lazypick": "Solving decision paralysis for movies & food.",
        "proj.motorambos": "Connecting car owners with mechanics.",
        "proj.stage": "Vendor discovery platform for events.",
        "proj.sandbox": "Digital network connecting creators.",
        "proj.minutes": "Speed Dating Event Series.",
        "proj.monochrome": "Premium affordable, modular furniture that adapt to changing needs.",
        "proj.outpost": "A serene cluster of sustainable off-grid tiny homes designed for rest.",
        "proj.vita": "Sustainable Agriculture.",
        "proj.loosewear": "Undergarments & sleepwear for everyday comfort. Soft, breathable, easy-to-wear.",
        "proj.offstage": "A platform for intimate theatre experiences and modern storytelling in Accra.",
        "meta.marketplace": "Marketplace",
        "meta.eventtech": "Event Tech",
        "meta.aitravel": "AI Travel",
        "meta.saas": "SaaS",
        "meta.lifestyle": "Lifestyle App",
        "meta.service": "Service",
        "meta.platform": "Platform",
        "meta.community": "Community",
        "meta.events": "Events",
        "meta.furniture": "Furniture",
        "meta.hospitality": "Hospitality",
        "meta.agro": "Agro",
        "meta.theatre": "Theatre",
        "section.reading": "Currently Reading",
        "proj.goodreads": "My Bookshelf",
        "meta.goodreads": "Books",
        "status.music": "On Repeat: Pop Rising",
        "error.not_found": "The page you're looking for doesn't exist.",
        "error.return_home": "Return Home",
        "dev.headline": "Building with Modern Tools",
        "dev.intro": "Full-stack engineer crafting products with TypeScript, React, and Flutter. I prioritize developer experience, type safety, and shipping fast.",
        "dev.languages": "Languages",
        "dev.frontend": "Frontend",
        "dev.backend": "Backend & Data",
        "dev.devops": "DevOps & Cloud",
        "dev.tools": "Design & Tools",
        "dev.in_action": "Skills in Action",
        "dev.philosophy": "Philosophy"
    },
    fr: {
        "nav.work": "Travail",
        "nav.ventures": "Entreprises",
        "nav.about": "Ã€ propos",
        "nav.dev": "Dev",
        "nav.writing": "Ã‰criture",
        "nav.back_writing": "â† Ã‰criture",
        "writing.archives": "Archives (Substack)",
        "nav.back_writing": "â† Ã‰criture",
        "writing.archives": "Archives (Substack)",
        "home.headline": "Construire pour les marchÃ©s africains. Concevoir pour l'Ã©chelle.",
        "home.role": "Architecte de Solutions & Bricoleur",
        "home.location": "Accra, Ghana ğŸ‡¬ğŸ‡­",
        "home.label_role": "RÃ´le",
        "home.label_base": "Base",
        "home.mission": "Je suis un BÃ¢tisseur de Produits & Penseur SystÃ©mique basÃ© Ã  Accra. J'architecte des solutions numÃ©riques qui rÃ©solvent des problÃ¨mes locaux aujourd'hui tout en prÃ©parant l'expansion transfrontaliÃ¨re de demain.",
        "home.say_hi": "Mon Histoire",
        "puzzle.title": "VÃ©rification Rapide",
        "puzzle.desc": "RÃ©soudre pour dire bonjour:",
        "video.caption": "Merci de votre visite! ğŸ‰",
        "btn.cancel": "Annuler",
        "btn.verify": "VÃ©rifier",

        "section.selected_works": "Travaux SÃ©lectionnÃ©s",
        "home.show_more": "Voir plus",
        "section.initiatives": "Initiatives",
        "section.writing": "Ã‰criture",
        "section.ventures": "Entreprises",
        "footer.email": "Email",
        "footer.twitter": "Twitter",
        "footer.linkedin": "LinkedIn",
        "footer.github": "GitHub",
        "ventures.intro": "Une collection d'entreprises commerciales et d'expÃ©rimentations au Ghana ğŸ‡¬ğŸ‡­.",
        "about.intro": "Qui je suis, mes croyances et ce que je dÃ©fends.",
        "about.headline": "BÃ¢tisseur, penseur et optimiste.",
        "about.bio": "Je suis architecte de solutions et bricoleur basÃ© Ã  Accra, au Ghana. Je crois au pouvoir de la technologie pour rÃ©soudre des problÃ¨mes concrets et amÃ©liorer la vie. Mon travail couvre divers domaines, de la fintech Ã  l'agriculture, toujours dans le but de crÃ©er des solutions durables et percutantes.",
        "about.pillars_heading": "Piliers StratÃ©giques",
        "about.beliefs": "Je crois en...",
        "about.stand_for": "Je dÃ©fends...",
        "writing.intro": "RÃ©flexions sur la technologie, le design et la crÃ©ation de produits.",
        "writing.articles": "Articles",
        "proj.rentbase": "Le 'Carfax pour les locations' en Afriqueâ€”vÃ©rifiant les agents et les contrats pour arrÃªter la fraude avant de payer.",
        "proj.amigo": "Chercheur de colocataires vÃ©rifiÃ©.",
        "proj.gatepass": "PremiÃ¨re place de marchÃ© vidÃ©o pour les Ã©vÃ©nements.",
        "proj.happening": "Un \"Tableau de DÃ©parts\" en temps rÃ©el pour les Ã©vÃ©nements en direct.",
        "proj.itinero": "Planificateur de voyage alimentÃ© par l'IA pour l'Afrique.",
        "proj.knitted": "OS d'entreprise pour les tailleurs pour enregistrer les mesures.",
        "proj.lazypick": "RÃ©soudre la paralysie dÃ©cisionnelle pour les films et la nourriture.",
        "proj.motorambos": "Mise en relation des propriÃ©taires de voitures avec des mÃ©caniciens.",
        "proj.stage": "Plateforme de dÃ©couverte de fournisseurs pour les Ã©vÃ©nements.",
        "proj.sandbox": "RÃ©seau numÃ©rique connectant les crÃ©ateurs.",
        "proj.minutes": "SÃ©rie d'Ã©vÃ©nements de Speed Dating.",
        "proj.monochrome": "Meubles modulaires haut de gamme et abordables qui s'adaptent aux besoins changeants.",
        "proj.outpost": "Un groupe serein de petites maisons durables hors rÃ©seau conÃ§ues pour le repos.",
        "proj.vita": "Agriculture Durable.",
        "proj.loosewear": "Sous-vÃªtements et vÃªtements de nuit pour le confort quotidien. Doux, respirant, facile Ã  porter.",
        "proj.offstage": "Une plateforme pour des expÃ©riences thÃ©Ã¢trales intimes et des rÃ©cits modernes Ã  Accra.",
        "meta.marketplace": "Place de marchÃ©",
        "meta.eventtech": "Technologie Ã‰vÃ©nementielle",
        "meta.aitravel": "Voyage IA",
        "meta.saas": "SaaS",
        "meta.lifestyle": "App Mode de Vie",
        "meta.service": "Service",
        "meta.platform": "Plateforme",
        "meta.community": "CommunautÃ©",
        "meta.events": "Ã‰vÃ©nements",
        "meta.furniture": "Meubles",
        "meta.hospitality": "HÃ´tellerie",
        "meta.agro": "Agro",
        "meta.apparel": "VÃªtements",
        "meta.theatre": "ThÃ©Ã¢tre",
        "section.reading": "Lectures en cours",
        "proj.goodreads": "Ma BibliothÃ¨que",
        "meta.goodreads": "Livres",
        "status.music": "En boucle: Pop Rising",
        "error.not_found": "La page que vous recherchez n'existe pas.",
        "error.return_home": "Retour Ã  l'accueil",
        "dev.headline": "Construire avec des Outils Modernes",
        "dev.intro": "IngÃ©nieur full-stack crÃ©ant des produits avec TypeScript, React et Flutter. Je privilÃ©gie l'expÃ©rience dÃ©veloppeur, la sÃ©curitÃ© des types et la rapiditÃ© de livraison.",
        "dev.languages": "Langages",
        "dev.frontend": "Frontend",
        "dev.backend": "Backend & DonnÃ©es",
        "dev.devops": "DevOps & Cloud",
        "dev.tools": "Design & Outils",
        "dev.in_action": "CompÃ©tences en Action",
        "dev.philosophy": "Philosophie"
    },
    es: {
        "nav.work": "Trabajo",
        "nav.ventures": "Empresas",
        "nav.about": "Sobre mÃ­",
        "nav.dev": "Dev",
        "nav.writing": "Escritura",
        "nav.back_writing": "â† Escritura",
        "writing.archives": "Archivos (Substack)",
        "work.intro": "Una selecciÃ³n de proyectos donde he liderado el diseÃ±o de productos y la ingenierÃ­a.",
        "nav.back_writing": "â† Escritura",
        "writing.archives": "Archivos (Substack)",
        "home.headline": "Construyendo para los mercados africanos. DiseÃ±ando para la escala.",
        "home.role": "Arquitecto de Soluciones y Inventor",
        "home.location": "Accra, Ghana ğŸ‡¬ğŸ‡­",
        "home.label_role": "Rol",
        "home.label_base": "Base",
        "home.mission": "Soy un Constructor de Productos y Pensador de Sistemas basado en Accra. Arquitecto soluciones digitales que resuelven problemas locales hoy mientras preparo la expansiÃ³n transfronteriza maÃ±ana.",
        "home.say_hi": "Mi Historia",
        "puzzle.title": "VerificaciÃ³n RÃ¡pida",
        "puzzle.desc": "Resolver para saludar:",
        "video.caption": "Â¡Gracias por visitar! ğŸ‰",
        "btn.cancel": "Cancelar",
        "btn.verify": "Verificar",

        "section.selected_works": "Trabajos Seleccionados",
        "home.show_more": "Ver mÃ¡s",
        "section.initiatives": "Iniciativas",
        "section.writing": "Escritura",
        "section.ventures": "Empresas",
        "footer.email": "Correo",
        "footer.twitter": "Twitter",
        "footer.linkedin": "LinkedIn",
        "footer.github": "GitHub",
        "ventures.intro": "Una colecciÃ³n de empresas comerciales y experimentos en Ghana ğŸ‡¬ğŸ‡­.",
        "about.intro": "QuiÃ©n soy, mis creencias y lo que defiendo.",
        "about.headline": "Constructor, pensador y optimista.",
        "about.bio": "Soy arquitecto de soluciones y experimentador con sede en Accra, Ghana. Creo en el poder de la tecnologÃ­a para resolver problemas del mundo real y mejorar vidas. Mi trabajo abarca varios dominios, desde fintech hasta agricultura, siempre con un enfoque en crear soluciones sostenibles e impactantes.",
        "about.pillars_heading": "Pilares EstratÃ©gicos",
        "about.beliefs": "Creo en...",
        "about.stand_for": "Defiendo...",
        "writing.intro": "Pensamientos sobre tecnologÃ­a, diseÃ±o y construcciÃ³n de productos.",
        "writing.articles": "ArtÃ­culos",
        "proj.rentbase": "El 'Carfax para alquileres' en Ãfricaâ€”verificando agentes y acuerdos para detener el fraude antes de pagar.",
        "proj.amigo": "Buscador de compaÃ±eros de piso verificado.",
        "proj.gatepass": "Primer mercado impulsado por video para eventos.",
        "proj.happening": "Un \"Tablero de Salidas\" en tiempo real para eventos en vivo.",
        "proj.itinero": "Planificador de viajes impulsado por IA para Ãfrica.",
        "proj.knitted": "Sistema operativo empresarial para que los sastres registren medidas.",
        "proj.lazypick": "Resolviendo la parÃ¡lisis de decisiÃ³n para pelÃ­culas y comida.",
        "proj.motorambos": "Conectando propietarios de automÃ³viles con mecÃ¡nicos.",
        "proj.stage": "Plataforma de descubrimiento de proveedores para eventos.",
        "proj.sandbox": "Red digital que conecta a creadores.",
        "proj.minutes": "Serie de eventos de citas rÃ¡pidas.",
        "proj.monochrome": "Muebles modulares premium y asequibles que se adaptan a las necesidades cambiantes.",
        "proj.outpost": "Un grupo sereno de pequeÃ±as casas sostenibles fuera de la red diseÃ±adas para el descanso.",
        "proj.vita": "Agricultura Sostenible.",
        "proj.loosewear": "Ropa interior y de dormir para la comodidad diaria. Suave, transpirable, fÃ¡cil de llevar.",
        "proj.offstage": "Una plataforma para experiencias teatrales Ã­ntimas y narraciÃ³n moderna en Accra.",
        "meta.marketplace": "Mercado",
        "meta.eventtech": "TecnologÃ­a de Eventos",
        "meta.aitravel": "Viajes IA",
        "meta.saas": "SaaS",
        "meta.lifestyle": "App de Estilo de Vida",
        "meta.service": "Servicio",
        "meta.platform": "Plataforma",
        "meta.community": "Comunidad",
        "meta.events": "Eventos",
        "meta.furniture": "Muebles",
        "meta.hospitality": "Hospitalidad",
        "meta.agro": "Agro",
        "meta.apparel": "Ropa",
        "meta.theatre": "Teatro",
        "section.reading": "Lectura Actual",
        "proj.goodreads": "Mi Biblioteca",
        "meta.goodreads": "Libros",
        "status.music": "En repeticiÃ³n: Pop Rising",
        "error.not_found": "La pÃ¡gina que buscas no existe.",
        "error.return_home": "Volver al inicio",
        "dev.headline": "Construyendo con Herramientas Modernas",
        "dev.intro": "Ingeniero full-stack creando productos con TypeScript, React y Flutter. Priorizo la experiencia del desarrollador, la seguridad de tipos y la entrega rÃ¡pida.",
        "dev.languages": "Lenguajes",
        "dev.frontend": "Frontend",
        "dev.backend": "Backend y Datos",
        "dev.devops": "DevOps y Cloud",
        "dev.tools": "DiseÃ±o y Herramientas",
        "dev.in_action": "Habilidades en AcciÃ³n",
        "dev.philosophy": "FilosofÃ­a"
    }
};

function setLanguage(lang) {
    if (!translations[lang]) return;

    // Save preference
    localStorage.setItem('lang', lang);

    // Update URL if supported
    const url = new URL(window.location);
    if (url.searchParams.get('lang') !== lang) {
        url.searchParams.set('lang', lang);
        window.history.replaceState({}, '', url);
    }

    // Update DOM
    document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        if (translations[lang][key]) {
            // Check if content has HTML (like the clock span in intro)
            if (translations[lang][key].includes('<')) {
                el.innerHTML = translations[lang][key];
                // If we replaced the clock, we need to make sure the clock updater still works.
                // The clock updater uses getElementById('clock'), so as long as the ID is there, it should find it on next tick.
                // However, we should probably manually trigger an update or let the interval handle it.
                if (key === 'home.intro') {
                    // Re-trigger clock update if function exists
                    if (typeof updateTime === 'function') updateTime();
                }
            } else {
                // Special handling for location to preserve clock if needed, though clock is separate now in new structure.
                // Actually, the new structure has the clock OUTSIDE the translated span.
                // <span data-i18n="home.location">Accra, Ghana ğŸ‡¬ğŸ‡­</span> <span id="clock"></span>
                // So simple text replacement is fine for home.location.
                el.textContent = translations[lang][key];
            }
        }
    });

    // Update active state in switcher
    document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.classList.toggle('active', btn.getAttribute('data-lang') === lang);
    });
}

function initLanguage() {
    const urlParams = new URLSearchParams(window.location.search);
    const savedLang = localStorage.getItem('lang');
    const browserLang = navigator.language.slice(0, 2);

    let lang = urlParams.get('lang') || savedLang || (['fr', 'es'].includes(browserLang) ? browserLang : 'en');

    // Default to EN if invalid
    if (!translations[lang]) lang = 'en';

    setLanguage(lang);

    // Add click listeners to switcher
    document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.addEventListener('click', (e) => {
            setLanguage(e.target.getAttribute('data-lang'));
        });
    });
}

document.addEventListener('DOMContentLoaded', initLanguage);
