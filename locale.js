const translations = {
    en: {
        "nav.work": "Work",
        "nav.ventures": "Ventures",
        "nav.dev": "Dev",
        "nav.writing": "Writing",
        "nav.back_writing": "‚Üê Writing",
        "writing.archives": "Archives (Substack)",
        "work.intro": "A selection of projects where I've led product design and engineering.",
        "home.headline": "Architecting digital platforms & building businesses for Africa & beyond.",
        "home.role": "Solutions Architect & Tinkerer",
        "home.location": "Accra, Ghana üá¨üá≠",
        "home.label_role": "Role",
        "home.label_base": "Base",
        "home.mission": "Solutions Architect & Tinkerer based in Accra, Ghana üá¨üá≠. Currently exploring the intersection of design, technology, and culture.",
        "home.say_hi": "My Story",
        "puzzle.title": "Quick Check",
        "puzzle.desc": "Solve to say hi:",
        "video.caption": "Thanks for checking in! üéâ",
        "btn.cancel": "Cancel",
        "btn.verify": "Verify",

        "section.selected_works": "Selected Works",
        "home.show_more": "Show More",
        "section.initiatives": "Initiatives",
        "section.writing": "Writing",
        "section.ventures": "Ventures",
        "footer.email": "Email",
        "footer.twitter": "Twitter",
        "footer.linkedin": "LinkedIn",
        "footer.github": "GitHub",
        "ventures.intro": "A collection of commercial ventures and experiments in Ghana üá¨üá≠.",
        "writing.intro": "Thoughts on technology, design, and building products.",
        "writing.articles": "Articles",
        "proj.rentbase": "The 'Carfax for Rentals' in Africa‚Äîverifying agents and agreements to stop fraud before you pay.",
        "proj.amigo": "Verified roommate finder.",
        "proj.gatepass": "First video-powered marketplace for events.",
        "proj.happening": "A real-time \"Departure Board\" for live events.",
        "proj.itinero": "AI-powered travel planner for Africa.",
        "proj.knitted": "Business OS for tailors to record measurements.",
        "proj.lazypick": "Solving decision paralysis for movies & food.",
        "proj.motorambos": "Connecting car owners with mechanics.",
        "proj.stage": "Vendor discovery platform for events.",
        "proj.sandbox": "Digital network connecting creators.",
        "proj.minutes": "Speed Dating Event Series.",
        "proj.monochrome": "Premium affordable, modular furniture that adapt to changing needs.",
        "proj.outpost": "A serene cluster of sustainable off-grid tiny homes designed for rest.",
        "proj.vita": "Sustainable Agriculture.",
        "proj.loosewear": "Undergarments & sleepwear for everyday comfort. Soft, breathable, easy-to-wear.",
        "proj.offstage": "A platform for intimate theatre experiences and modern storytelling in Accra.",
        "meta.marketplace": "Marketplace",
        "meta.eventtech": "Event Tech",
        "meta.aitravel": "AI Travel",
        "meta.saas": "SaaS",
        "meta.lifestyle": "Lifestyle App",
        "meta.service": "Service",
        "meta.platform": "Platform",
        "meta.community": "Community",
        "meta.events": "Events",
        "meta.furniture": "Furniture",
        "meta.hospitality": "Hospitality",
        "meta.agro": "Agro",
        "meta.theatre": "Theatre",
        "section.reading": "Currently Reading",
        "proj.goodreads": "My Bookshelf",
        "meta.goodreads": "Books",
        "status.music": "On Repeat: Pop Rising",
        "error.not_found": "The page you're looking for doesn't exist.",
        "error.return_home": "Return Home",
        "dev.headline": "Building with Modern Tools",
        "dev.intro": "Full-stack engineer crafting products with TypeScript, React, and Flutter. I prioritize developer experience, type safety, and shipping fast.",
        "dev.languages": "Languages",
        "dev.frontend": "Frontend",
        "dev.backend": "Backend & Data",
        "dev.devops": "DevOps & Cloud",
        "dev.tools": "Design & Tools",
        "dev.in_action": "Skills in Action",
        "dev.philosophy": "Philosophy"
    },
    fr: {
        "nav.work": "Travail",
        "nav.ventures": "Entreprises",
        "nav.dev": "Dev",
        "nav.writing": "√âcriture",
        "nav.back_writing": "‚Üê √âcriture",
        "writing.archives": "Archives (Substack)",
        "nav.back_writing": "‚Üê √âcriture",
        "writing.archives": "Archives (Substack)",
        "home.intro": "Je suis un Architecte de Solutions & Bricoleur bas√© √† Accra, Ghana üá¨üá≠ <span style='color: var(--text-tertiary);' id='clock'></span>. Je construis des produits qui r√©solvent des probl√®mes en Afrique et au-del√†.",
        "home.headline": "Architecte de plateformes num√©riques et cr√©ateur d'entreprises.",
        "home.role": "Architecte de Solutions & Bricoleur",
        "home.location": "Accra, Ghana üá¨üá≠",
        "home.label_role": "R√¥le",
        "home.label_base": "Base",
        "home.mission": "Architecte de Solutions & Bricoleur bas√© √† Accra, Ghana üá¨üá≠. Actuellement, j'explore l'intersection du design, de la technologie et de la culture.",
        "home.say_hi": "Mon Histoire",
        "puzzle.title": "V√©rification Rapide",
        "puzzle.desc": "R√©soudre pour dire bonjour:",
        "video.caption": "Merci de votre visite! üéâ",
        "btn.cancel": "Annuler",
        "btn.verify": "V√©rifier",

        "section.selected_works": "Travaux S√©lectionn√©s",
        "home.show_more": "Voir plus",
        "section.initiatives": "Initiatives",
        "section.writing": "√âcriture",
        "section.ventures": "Entreprises",
        "footer.email": "Email",
        "footer.twitter": "Twitter",
        "footer.linkedin": "LinkedIn",
        "footer.github": "GitHub",
        "ventures.intro": "Une collection d'entreprises commerciales et d'exp√©rimentations au Ghana üá¨üá≠.",
        "writing.intro": "R√©flexions sur la technologie, le design et la cr√©ation de produits.",
        "writing.articles": "Articles",
        "proj.rentbase": "Le 'Carfax pour les locations' en Afrique‚Äîv√©rifiant les agents et les contrats pour arr√™ter la fraude avant de payer.",
        "proj.amigo": "Chercheur de colocataires v√©rifi√©.",
        "proj.gatepass": "Premi√®re place de march√© vid√©o pour les √©v√©nements.",
        "proj.happening": "Un \"Tableau de D√©parts\" en temps r√©el pour les √©v√©nements en direct.",
        "proj.itinero": "Planificateur de voyage aliment√© par l'IA pour l'Afrique.",
        "proj.knitted": "OS d'entreprise pour les tailleurs pour enregistrer les mesures.",
        "proj.lazypick": "R√©soudre la paralysie d√©cisionnelle pour les films et la nourriture.",
        "proj.motorambos": "Mise en relation des propri√©taires de voitures avec des m√©caniciens.",
        "proj.stage": "Plateforme de d√©couverte de fournisseurs pour les √©v√©nements.",
        "proj.sandbox": "R√©seau num√©rique connectant les cr√©ateurs.",
        "proj.minutes": "S√©rie d'√©v√©nements de Speed Dating.",
        "proj.monochrome": "Meubles modulaires haut de gamme et abordables qui s'adaptent aux besoins changeants.",
        "proj.outpost": "Un groupe serein de petites maisons durables hors r√©seau con√ßues pour le repos.",
        "proj.vita": "Agriculture Durable.",
        "proj.loosewear": "Sous-v√™tements et v√™tements de nuit pour le confort quotidien. Doux, respirant, facile √† porter.",
        "proj.offstage": "Une plateforme pour des exp√©riences th√©√¢trales intimes et des r√©cits modernes √† Accra.",
        "meta.marketplace": "Place de march√©",
        "meta.eventtech": "Technologie √âv√©nementielle",
        "meta.aitravel": "Voyage IA",
        "meta.saas": "SaaS",
        "meta.lifestyle": "App Mode de Vie",
        "meta.service": "Service",
        "meta.platform": "Plateforme",
        "meta.community": "Communaut√©",
        "meta.events": "√âv√©nements",
        "meta.furniture": "Meubles",
        "meta.hospitality": "H√¥tellerie",
        "meta.agro": "Agro",
        "meta.apparel": "V√™tements",
        "meta.theatre": "Th√©√¢tre",
        "section.reading": "Lectures en cours",
        "proj.goodreads": "Ma Biblioth√®que",
        "meta.goodreads": "Livres",
        "status.music": "En boucle: Pop Rising",
        "error.not_found": "La page que vous recherchez n'existe pas.",
        "error.return_home": "Retour √† l'accueil",
        "dev.headline": "Construire avec des Outils Modernes",
        "dev.intro": "Ing√©nieur full-stack cr√©ant des produits avec TypeScript, React et Flutter. Je privil√©gie l'exp√©rience d√©veloppeur, la s√©curit√© des types et la rapidit√© de livraison.",
        "dev.languages": "Langages",
        "dev.frontend": "Frontend",
        "dev.backend": "Backend & Donn√©es",
        "dev.devops": "DevOps & Cloud",
        "dev.tools": "Design & Outils",
        "dev.in_action": "Comp√©tences en Action",
        "dev.philosophy": "Philosophie"
    },
    es: {
        "nav.work": "Trabajo",
        "nav.ventures": "Empresas",
        "nav.dev": "Dev",
        "nav.writing": "Escritura",
        "nav.back_writing": "‚Üê Escritura",
        "writing.archives": "Archivos (Substack)",
        "work.intro": "Una selecci√≥n de proyectos donde he liderado el dise√±o de productos y la ingenier√≠a.",
        "nav.back_writing": "‚Üê Escritura",
        "writing.archives": "Archivos (Substack)",
        "home.intro": "Soy Arquitecto de Soluciones y Experimentador basado en Accra, Ghana üá¨üá≠ <span style='color: var(--text-tertiary);' id='clock'></span>. Construyo productos que resuelven problemas en √Åfrica y m√°s all√°.",
        "home.headline": "Arquitecto de plataformas digitales y constructor de negocios.",
        "home.role": "Arquitecto de Soluciones y Inventor",
        "home.location": "Accra, Ghana üá¨üá≠",
        "home.label_role": "Rol",
        "home.label_base": "Base",
        "home.mission": "Arquitecto de Soluciones y Experimentador basado en Accra, Ghana üá¨üá≠. Actualmente explorando la intersecci√≥n del dise√±o, la tecnolog√≠a y la cultura.",
        "home.say_hi": "Mi Historia",
        "puzzle.title": "Verificaci√≥n R√°pida",
        "puzzle.desc": "Resolver para saludar:",
        "video.caption": "¬°Gracias por visitar! üéâ",
        "btn.cancel": "Cancelar",
        "btn.verify": "Verificar",

        "section.selected_works": "Trabajos Seleccionados",
        "home.show_more": "Ver m√°s",
        "section.initiatives": "Iniciativas",
        "section.writing": "Escritura",
        "section.ventures": "Empresas",
        "footer.email": "Correo",
        "footer.twitter": "Twitter",
        "footer.linkedin": "LinkedIn",
        "footer.github": "GitHub",
        "ventures.intro": "Una colecci√≥n de empresas comerciales y experimentos en Ghana üá¨üá≠.",
        "writing.intro": "Pensamientos sobre tecnolog√≠a, dise√±o y construcci√≥n de productos.",
        "writing.articles": "Art√≠culos",
        "proj.rentbase": "El 'Carfax para alquileres' en √Åfrica‚Äîverificando agentes y acuerdos para detener el fraude antes de pagar.",
        "proj.amigo": "Buscador de compa√±eros de piso verificado.",
        "proj.gatepass": "Primer mercado impulsado por video para eventos.",
        "proj.happening": "Un \"Tablero de Salidas\" en tiempo real para eventos en vivo.",
        "proj.itinero": "Planificador de viajes impulsado por IA para √Åfrica.",
        "proj.knitted": "Sistema operativo empresarial para que los sastres registren medidas.",
        "proj.lazypick": "Resolviendo la par√°lisis de decisi√≥n para pel√≠culas y comida.",
        "proj.motorambos": "Conectando propietarios de autom√≥viles con mec√°nicos.",
        "proj.stage": "Plataforma de descubrimiento de proveedores para eventos.",
        "proj.sandbox": "Red digital que conecta a creadores.",
        "proj.minutes": "Serie de eventos de citas r√°pidas.",
        "proj.monochrome": "Muebles modulares premium y asequibles que se adaptan a las necesidades cambiantes.",
        "proj.outpost": "Un grupo sereno de peque√±as casas sostenibles fuera de la red dise√±adas para el descanso.",
        "proj.vita": "Agricultura Sostenible.",
        "proj.loosewear": "Ropa interior y de dormir para la comodidad diaria. Suave, transpirable, f√°cil de llevar.",
        "proj.offstage": "Una plataforma para experiencias teatrales √≠ntimas y narraci√≥n moderna en Accra.",
        "meta.marketplace": "Mercado",
        "meta.eventtech": "Tecnolog√≠a de Eventos",
        "meta.aitravel": "Viajes IA",
        "meta.saas": "SaaS",
        "meta.lifestyle": "App de Estilo de Vida",
        "meta.service": "Servicio",
        "meta.platform": "Plataforma",
        "meta.community": "Comunidad",
        "meta.events": "Eventos",
        "meta.furniture": "Muebles",
        "meta.hospitality": "Hospitalidad",
        "meta.agro": "Agro",
        "meta.apparel": "Ropa",
        "meta.theatre": "Teatro",
        "section.reading": "Lectura Actual",
        "proj.goodreads": "Mi Biblioteca",
        "meta.goodreads": "Libros",
        "status.music": "En repetici√≥n: Pop Rising",
        "error.not_found": "La p√°gina que buscas no existe.",
        "error.return_home": "Volver al inicio",
        "dev.headline": "Construyendo con Herramientas Modernas",
        "dev.intro": "Ingeniero full-stack creando productos con TypeScript, React y Flutter. Priorizo la experiencia del desarrollador, la seguridad de tipos y la entrega r√°pida.",
        "dev.languages": "Lenguajes",
        "dev.frontend": "Frontend",
        "dev.backend": "Backend y Datos",
        "dev.devops": "DevOps y Cloud",
        "dev.tools": "Dise√±o y Herramientas",
        "dev.in_action": "Habilidades en Acci√≥n",
        "dev.philosophy": "Filosof√≠a"
    }
};

function setLanguage(lang) {
    if (!translations[lang]) return;

    // Save preference
    localStorage.setItem('lang', lang);

    // Update URL if supported
    const url = new URL(window.location);
    if (url.searchParams.get('lang') !== lang) {
        url.searchParams.set('lang', lang);
        window.history.replaceState({}, '', url);
    }

    // Update DOM
    document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        if (translations[lang][key]) {
            // Check if content has HTML (like the clock span in intro)
            if (translations[lang][key].includes('<')) {
                el.innerHTML = translations[lang][key];
                // If we replaced the clock, we need to make sure the clock updater still works.
                // The clock updater uses getElementById('clock'), so as long as the ID is there, it should find it on next tick.
                // However, we should probably manually trigger an update or let the interval handle it.
                if (key === 'home.intro') {
                    // Re-trigger clock update if function exists
                    if (typeof updateTime === 'function') updateTime();
                }
            } else {
                // Special handling for location to preserve clock if needed, though clock is separate now in new structure.
                // Actually, the new structure has the clock OUTSIDE the translated span.
                // <span data-i18n="home.location">Accra, Ghana üá¨üá≠</span> <span id="clock"></span>
                // So simple text replacement is fine for home.location.
                el.textContent = translations[lang][key];
            }
        }
    });

    // Update active state in switcher
    document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.classList.toggle('active', btn.getAttribute('data-lang') === lang);
    });
}

function initLanguage() {
    const urlParams = new URLSearchParams(window.location.search);
    const savedLang = localStorage.getItem('lang');
    const browserLang = navigator.language.slice(0, 2);

    let lang = urlParams.get('lang') || savedLang || (['fr', 'es'].includes(browserLang) ? browserLang : 'en');

    // Default to EN if invalid
    if (!translations[lang]) lang = 'en';

    setLanguage(lang);

    // Add click listeners to switcher
    document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.addEventListener('click', (e) => {
            setLanguage(e.target.getAttribute('data-lang'));
        });
    });
}

document.addEventListener('DOMContentLoaded', initLanguage);
